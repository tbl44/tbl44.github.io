<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ICMP协议抓包分析</title>
      <link href="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/"/>
      <url>/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="icmp协议的分析"><a href="#icmp协议的分析" class="headerlink" title="icmp协议的分析"></a>icmp协议的分析</h2><p>ICMP（Internet Control Message Protocol，互联网控制报文协议）是网络设备用来发送错误消息和操作信息的协议，通常用于诊断网络连接问题。ICMP 是 TCP&#x2F;IP 协议族的一部分，主要用于主机与主机之间、主机与路由器之间以及路由器与路由器之间的通信。</p><h3 id="ICMP的主要功能"><a href="#ICMP的主要功能" class="headerlink" title="ICMP的主要功能"></a>ICMP的主要功能</h3><ol><li><strong>错误报告</strong>：<ul><li>当数据包不能到达目的地时，ICMP可以发送错误报告回源地址。例如，如果路由器找不到去往目的地的路由，它会发送一个“目标不可达”（Destination Unreachable）的ICMP消息。</li></ul></li><li><strong>网络诊断</strong>：<ul><li>ICMP常用于工具如<code>ping</code>和<code>traceroute</code>。<code>ping</code>使用ICMP回显请求和回显应答消息来检测网络连接是否可达，并测量往返时间。<code>traceroute</code>则通过逐步增加数据包的TTL（生存时间）来跟踪数据包的路径。</li></ul></li><li><strong>流量控制</strong>：<ul><li>ICMP可以发送“源抑制”（Source Quench）消息，通知发送方降低数据包发送速度，以避免网络过载。</li></ul></li></ol><h3 id="ICMP报文类型"><a href="#ICMP报文类型" class="headerlink" title="ICMP报文类型"></a>ICMP报文类型</h3><p>ICMP报文有多种类型，每种类型都有其特定的用途。常见的ICMP报文类型包括：</p><ul><li><strong>回显请求（Echo Request, 类型8）和回显应答（Echo Reply, 类型0）</strong>：用于<code>ping</code>操作。</li><li><strong>目标不可达（Destination Unreachable, 类型3）</strong>：表示数据包无法到达目的地。</li><li><strong>时间超时（Time Exceeded, 类型11）</strong>：用于指示数据包的TTL到达0时仍未到达目的地，一般在<code>traceroute</code>中使用。</li><li><strong>重定向（Redirect, 类型5）</strong>：通知主机应该使用另一条路由。</li></ul><h3 id="wireshark抓包分析"><a href="#wireshark抓包分析" class="headerlink" title="wireshark抓包分析"></a>wireshark抓包分析</h3><p>我们可以在电脑的终端中ping我们的网关，再通过wireshark来抓到到icmp报文。</p><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/1.png" class="" title="alt text"><p>wireshark抓包信息：</p><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/2.png" class="" title="alt text"><p><strong>请求报文：</strong></p><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/3.png" class="" title="alt text"><p><strong>应答报文：</strong></p><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/4.png" class="" title="alt text"><p><strong>工作过程:</strong></p><p>本机发送一个 ICMP Echo Request 的包接受方返回一个ICMP Echo Reply，</p><p>包含了接受到数据拷贝和一些其他指令</p><h3 id="回显请求与应答报文的结构"><a href="#回显请求与应答报文的结构" class="headerlink" title="回显请求与应答报文的结构"></a>回显请求与应答报文的结构</h3><p>ICMP回显请求和应答报文的结构大致如下：</p><ul><li><strong>类型（Type）</strong>：8 表示回显请求，0 表示回显应答。</li><li><strong>代码（Code）</strong>：通常为 0。</li><li><strong>校验和（Checksum）</strong>：用于检测报文在传输中是否损坏。</li><li><strong>标识符（Identifier）</strong>：通常用来匹配请求和应答报文，允许区分不同的会话。</li><li><strong>序列号（Sequence Number）</strong>：用于跟踪报文的顺序，通常在多次请求中递增。</li><li><strong>数据（Data）</strong>：这是一个可选的填充字段，用于携带实际的数据。</li></ul><h3 id="数据字段的内容"><a href="#数据字段的内容" class="headerlink" title="数据字段的内容"></a>数据字段的内容</h3><p>在回显请求报文中，数据字段可以填充任何数据，常见的填充内容包括：</p><ul><li><strong>时间戳</strong>：用于计算往返时间。</li><li><strong>字符数据</strong>：例如，常见的填充数据为字符串，如“abcdefghijklmnopqrstuvwxyz”或简单的字节数据。</li><li><strong>随机数据</strong>：确保在网络传输中不会出现数据重复或重叠。<img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/5.png" class="" title="alt text"></li></ul><h2 id="icmp-中是如何来计算时间的？"><a href="#icmp-中是如何来计算时间的？" class="headerlink" title="icmp 中是如何来计算时间的？"></a>icmp 中是如何来计算时间的？</h2><p>ICMP 协议中的时间计算主要用于测量数据包在网络中的往返时间（Round-Trip Time, RTT），即一个 ICMP 回显请求（Echo Request）从发送到接收到相应的回显应答（Echo Reply）所经过的时间。这个时间的测量通常在网络诊断工具如 <code>ping</code> 中被使用。以下是 ICMP 中时间计算的过程：</p><h3 id="1-时间戳的记录"><a href="#1-时间戳的记录" class="headerlink" title="1. 时间戳的记录"></a>1. <strong>时间戳的记录</strong></h3><ul><li>当一个 ICMP 回显请求被发送时，发送方通常会在数据字段中记录一个时间戳。这通常是发送请求时的精确时间。</li><li>这个时间戳可以是系统的当前时间（例如以毫秒或微秒为单位的精确时间），具体格式取决于系统实现。</li></ul><h3 id="2-数据包的传输"><a href="#2-数据包的传输" class="headerlink" title="2. 数据包的传输"></a>2. <strong>数据包的传输</strong></h3><ul><li>ICMP 回显请求数据包从源主机发送到目标主机，经过可能的多个网络节点（如路由器）。</li><li>目标主机接收到请求后，会立即生成一个回显应答，将数据字段中的时间戳原封不动地返回给源主机。</li></ul><h3 id="3-应答的接收"><a href="#3-应答的接收" class="headerlink" title="3. 应答的接收"></a>3. <strong>应答的接收</strong></h3><ul><li><p>当源主机收到目标主机返回的 ICMP 回显应答时，它会读取应答报文中的时间戳。</p></li><li><p>计算RTT的方法是将当前时间与数据字段中的时间戳进行比较，即：</p><p>RTT&#x3D;接收应答的时间−发送请求的时间RTT &#x3D; \text{接收应答的时间} - \text{发送请求的时间}RTT&#x3D;接收应答的时间−发送请求的时间</p></li><li><p>这个时间差就是数据包在网络中的往返时间。</p></li></ul><h3 id="4-RTT-结果的显示"><a href="#4-RTT-结果的显示" class="headerlink" title="4. RTT 结果的显示"></a>4. <strong>RTT 结果的显示</strong></h3><ul><li><code>ping</code> 工具通常会显示每次请求的 RTT，以及多次请求的平均 RTT、最小 RTT 和最大 RTT。这些值可以帮助用户了解网络的性能和延迟情况。</li></ul><h4 id="TTL："><a href="#TTL：" class="headerlink" title="TTL："></a>TTL：</h4><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/6.png" class="" title="alt text"><h3 id="tracert-命令"><a href="#tracert-命令" class="headerlink" title="tracert 命令"></a>tracert 命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tracert（trace Route）</span><br><span class="line">tracert + 设备ip</span><br></pre></td></tr></table></figure><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/7.png" class="" title="alt text"><p>如果数据包的跳数超过了设定的最大值（在 <code>tracert</code> 或 <code>traceroute</code> 命令中通常是 30 跳），则有几种可能的情况和影响：</p><ol><li><strong>路由环路</strong>：数据包可能进入一个环路状态，即它在两个或多个路由器之间不断循环。这会导致数据包永远不会到达目的地。</li><li><strong>目标不可达</strong>：如果数据包未能在最大跳数限制内到达目标，则认为目标网络不可达。这可能是由于网络配置错误或物理连接问题造成的。</li><li><strong>丢包</strong>：超过最大跳数的数据包通常会被网络中的一个路由器丢弃，并返回一个 ICMP 超时消息给发送者。</li><li><strong>延迟</strong>：数据包在多个跳数之间传输会导致增加的延迟，特别是在跨国或长距离的连接中。</li></ol><p><strong>一下tracert + 百度的公网IP：</strong></p><img src="/2024/08/08/ICMP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/8.png" class="" title="alt text"><p>从 <code>tracert</code> 输出中，我们可以看到：</p><ol><li>第一跳通过你的本地网关 <code>192.168.10.1</code>，延迟很低（2 毫秒）。</li><li>第二跳到达外部网络设备 <code>110.110.110.254</code>，延迟依旧非常低（平均约 2 毫秒）。</li><li>从第三跳开始，出现了请求超时，这表明数据包没有从下一个路由点成功返回，可能是因为网络配置问题、路由器故障或是某些网络设备配置了不响应 <code>tracert</code> 或 <code>ICMP</code> 请求。</li></ol><p>请求超时可能是因为：</p><ul><li>路由器或防火墙设置阻止了 ICMP 数据包。</li><li>网络链路故障或不稳定导致数据包无法传输。</li><li>路由配置问题导致数据包无法正确转发。</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ARP协议抓包分析</title>
      <link href="/2024/08/07/ARP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/"/>
      <url>/2024/08/07/ARP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="wireshark-抓包分析"><a href="#wireshark-抓包分析" class="headerlink" title="wireshark 抓包分析"></a>wireshark 抓包分析</h1><h4 id="实战-使用-WireShark对常用协议抓包并分析原理"><a href="#实战-使用-WireShark对常用协议抓包并分析原理" class="headerlink" title="实战:使用 WireShark对常用协议抓包并分析原理"></a>实战:使用 WireShark对常用协议抓包并分析原理</h4><h3 id="1、常用协议分析"><a href="#1、常用协议分析" class="headerlink" title="1、常用协议分析"></a>1、常用协议分析</h3><p><strong>ARP 协议</strong></p><p>地址解析协议：(Address ResolutionProtocol，缩写:ARP)是一个通过解析网络层地址来找寻数据链路层地址的网络传输协议，它在IPv4中极其重要。<strong>ARP是通过网络地址（ip）来定位（确认）MAC地址。</strong></p><h3 id="一、ARP协议的基本概念"><a href="#一、ARP协议的基本概念" class="headerlink" title="一、ARP协议的基本概念"></a>一、ARP协议的基本概念</h3><ul><li><strong>定义</strong>：ARP协议是一个网络层协议，用于将网络层的IP地址解析成链路层的MAC地址，以便数据能在物理网络上正确传输。</li><li><strong>制定者</strong>：ARP协议由互联网工程任务组（IETF）在1982年11月发布的RFC 826中描述制定。</li><li><strong>作用</strong>：在TCP&#x2F;IP网络中，每个联网的主机都会被分配一个32位的IP地址，但为了让报文在物理网络上传输，还需要知道对方目的主机的物理地址（MAC地址）。ARP协议就是负责实现这一地址转换的。</li></ul><p><strong>抓包分析过程</strong></p><p>​过滤arp包：</p><img src="/2024/08/07/ARP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/1.png" class="" title="alt text"><h4 id="报文解析"><a href="#报文解析" class="headerlink" title="报文解析"></a>报文解析</h4><p>ARP（Address Resolution Protocol）协议的报文主要分为两种类型：<strong>ARP请求报文</strong>和<strong>ARP应答报文</strong>。下面我将分别举例分析这两种报文的结构和内容。</p><h5 id="请求报文："><a href="#请求报文：" class="headerlink" title="请求报文："></a>请求报文：</h5><img src="/2024/08/07/ARP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/2.png" class="" title="alt text"><h5 id="应答报文："><a href="#应答报文：" class="headerlink" title="应答报文："></a>应答报文：</h5><img src="/2024/08/07/ARP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/3.png" class="" title="alt text"><h5 id="总结：我们可以看到应答包补全了自己的mark地址目的地址和源地址做了替换。"><a href="#总结：我们可以看到应答包补全了自己的mark地址目的地址和源地址做了替换。" class="headerlink" title="总结：我们可以看到应答包补全了自己的mark地址目的地址和源地址做了替换。"></a>总结：我们可以看到应答包补全了自己的mark地址目的地址和源地址做了替换。</h5><img src="/2024/08/07/ARP%E5%8D%8F%E8%AE%AE%E6%8A%93%E5%8C%85%E5%88%86%E6%9E%90/4.png" class="" title="alt text"><p><strong>192.168.3.230广播:谁有 192.168.3.177 的 MAC地址?</strong></p><p><strong>192.168.3.177 应答:192.168.3.177 的 MAC 地址是 xxxxxxxxxxx</strong></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>如何搭建自己的博客</title>
      <link href="/2024/08/06/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/"/>
      <url>/2024/08/06/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="如何来搭建自己的博客"><a href="#如何来搭建自己的博客" class="headerlink" title="如何来搭建自己的博客"></a>如何来搭建自己的博客</h1><p>​首先介绍介绍一下，本博客采用的是hexo框架搭配butterfly主题生成的。两者都有着自己的文档链接非常地详细，小白也可以很轻松地按照文档上地步骤搭建属于自己地博客。（在尝试中的最大的挑战可能就是网络的问题了）</p><p>下面是hexo和butterfly的文档链接：</p><ul><li><a href="https://hexo.io/zh-cn/docs">https://hexo.io/zh-cn/docs</a></li><li><a href="https://butterfly.js.org/">https://butterfly.js.org</a></li></ul><img src="/2024/08/06/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/1.png" class="" title="alt text"><img src="/2024/08/06/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/2.png" class="" title="alt text"><p>还有一些搭建中可能遇到的一些问题，可以参考下面的文章：</p><p>hexo本地博客+云服务器个人博客搭建</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/m0_56112405/article/details/138262057</span><br></pre></td></tr></table></figure><p>Hexo-Butterfly音乐播放器的添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/qq_41467882/article/details/124734598</span><br></pre></td></tr></table></figure><p>Hexo 博客部署到腾讯云服务器全流程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/StaunchKai/article/details/82878928</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/08/04/hello-world/"/>
      <url>/2024/08/04/hello-world/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
